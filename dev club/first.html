<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>three.js demo</title>
    <style>
        body {
            margin: 0;
        }
        canvas{
            width: 100%;
            height: 100%;
        }

    </style>
</head>

<body>
    <script src="three.js"></script>
    <script> 
        const scene = new THREE.Scene(); 
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000); 
        const renderer = new THREE.WebGLRenderer(); 

        renderer.setSize(window.innerWidth, window.innerHeight); 
        //setSize(window.innerWidth/2, window.innerHeight/2, false) will render your app at half resolution, given that your <canvas> has 100% width and height.

        document.body.appendChild(renderer.domElement); 

        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap; // default THREE.PCFShadowMap

        renderer.setPixelRatio(window.devicePixelRatio);

        //Create a DirectionalLight and turn on shadows for the light
        const light = new THREE.DirectionalLight( 0xffffff, 1, 100);
        light.position.set( 0, 0, 1 ); //default; light shining from top
        light.castShadow = true; // default false
        scene.add( light );
        // Create a texture loader
        const loader = new THREE.TextureLoader();

        //Set up shadow properties for the light
        light.shadow.mapSize.width = 512; // default
        light.shadow.mapSize.height = 512; // default
        light.shadow.camera.near = 0.5; // default
        light.shadow.camera.far = 500; // default

        // Create the sun with a texture
        const sunGeo = new THREE.SphereGeometry(1, 32, 32);
        const sunTexture = loader.load('sun.jpg'); // Replace with the path to your sun texture
        const sunMat = new THREE.MeshBasicMaterial({ map: sunTexture });
        const sun = new THREE.Mesh(sunGeo, sunMat);
        scene.add(sun);


        // Create the earth with a texture
        const earthGeo = new THREE.SphereGeometry(0.5, 32, 32);
        const earthTexture = loader.load('image.jpg'); // Replace with the path to your earth texture
        const earthMat = new THREE.MeshBasicMaterial({ map: earthTexture });
        const earth = new THREE.Mesh(earthGeo, earthMat);
        earth.position.x = 2; // Position the earth 2 units away from the sun
        scene.add(earth);

        // Create the moon with a texture
        const moonGeo = new THREE.SphereGeometry(0.25, 32, 32);
        const moonTexture = loader.load('moon.jpg'); // Replace with the path to your moon texture
        const moonMat = new THREE.MeshBasicMaterial({ map: moonTexture });
        const moon = new THREE.Mesh(moonGeo, moonMat);
        moon.position.x = 0.75; // Position the moon 0.75 units away from the earth
        earth.add(moon); // Add the moon to the earth so it moves with the earth


        scene.add(camera);

        renderer.shadowMap.enabled = true;

        camera.position.z = 5; 
        //camera.rotation.y = 1.57;

        function animate() {
        requestAnimationFrame(animate);

        // Rotate the earth around the sun
        earth.position.x = Math.cos(Date.now() / 2000) * 2;
        earth.position.z = Math.sin(Date.now() / 2000) * 2;

        // Rotate the moon around the earth
        moon.position.x = Math.cos(Date.now() / 1000) * 0.75;
        moon.position.z = Math.sin(Date.now() / 1000) * 0.75;

        renderer.render(scene, camera);
        }
        animate();


    </script>
</body>

</html>
